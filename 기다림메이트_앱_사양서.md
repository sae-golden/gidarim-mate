# ê¸°ë‹¤ë¦¼ë©”ì´íŠ¸ ì•± ì „ì²´ ì‚¬ì–‘ì„œ

## 1. ì•± ê°œìš”

| í•­ëª© | ë‚´ìš© |
|---|---|
| **ì•± ëª…ì¹­** | ê¸°ë‹¤ë¦¼ë©”ì´íŠ¸ |
| **ì•± ID** | com.ivfmate.app |
| **ë²„ì „** | 1.0.0+1 |
| **í”Œë«í¼** | Android 7.0+ (SDK 24), iOS 12+ |
| **ê°œë°œ í™˜ê²½** | Flutter 3.10.4+, Dart |
| **ì„¤ëª…** | IVF/IUI ë‚œì„ ì¹˜ë£Œ ì¤‘ ì•½ë¬¼ ë³µìš© ì¼ì • ê´€ë¦¬ ë° ì¹˜ë£Œ ê³¼ì • ê¸°ë¡ ì•± |

---

## 2. ì•± êµ¬ì¡°

### 2.1 íƒ­ êµ¬ì„± (ë°”í…€ ë„¤ë¹„ê²Œì´ì…˜)

| íƒ­ | í™”ë©´ | íŒŒì¼ | ì„¤ëª… |
|---|---|---|---|
| í™ˆ | HomeScreen | home_screen.dart | ì˜¤ëŠ˜ì˜ ì•½ë¬¼ ì¼ì • ë° ìƒíƒœ |
| ìº˜ë¦°ë” | CalendarScreen | calendar_screen.dart | ì›”ë³„ ìº˜ë¦°ë”ë¡œ ë³µìš© ê¸°ë¡ ì‹œê°í™” |
| + (ì¶”ê°€) | FAB | - | ì•½ë¬¼ ì¶”ê°€ ì˜µì…˜ (3ê°€ì§€) |
| ê¸°ë¡ | SimpleRecordScreen | simple_record_screen.dart | ì‹œìˆ  ì´ë²¤íŠ¸ íƒ€ì„ë¼ì¸ |
| ì„¤ì • | SettingsScreen | settings_screen.dart | ì•± ì„¤ì • ë° ì •ë³´ |

### 2.2 í™”ë©´ íë¦„

```
ì•± ì‹œì‘
  â””â”€> MainScreen (ë°”í…€ ë„¤ë¹„ê²Œì´ì…˜)
        â”œâ”€> í™ˆíƒ­: ì˜¤ëŠ˜ ì•½ë¬¼ ëª©ë¡
        â”‚     â””â”€> ì•½ë¬¼ ì¹´ë“œ íƒ­ â†’ ë³µìš© ì™„ë£Œ/ê±´ë„ˆë›°ê¸°
        â”‚
        â”œâ”€> ìº˜ë¦°ë”íƒ­: ì›”ë³„ ìº˜ë¦°ë”
        â”‚     â””â”€> ë‚ ì§œ íƒ­ â†’ í•´ë‹¹ì¼ ì•½ë¬¼/ê¸°ë¡ ìƒì„¸
        â”‚
        â”œâ”€> + ë²„íŠ¼: ì•½ë¬¼ ì¶”ê°€
        â”‚     â”œâ”€> ìŒì„±ìœ¼ë¡œ ë§í•˜ê¸° â†’ VoiceInputScreen
        â”‚     â”œâ”€> ì§ì ‘ ì…ë ¥ â†’ QuickAddMedicationScreen
        â”‚     â””â”€> ì²˜ë°©ì „ ì‚¬ì§„ (ì¤€ë¹„ì¤‘)
        â”‚
        â”œâ”€> ê¸°ë¡íƒ­: ì‹œìˆ  íƒ€ì„ë¼ì¸
        â”‚     â”œâ”€> ìƒˆ ì‚¬ì´í´ ì‹œì‘
        â”‚     â”œâ”€> ì´ë²¤íŠ¸ ì¶”ê°€ (ê³¼ë°°ë€/ì±„ì·¨/ì´ì‹/ë™ê²°/ì¸ê³µìˆ˜ì •)
        â”‚     â””â”€> ì¶”ê°€ ê¸°ë¡ (ìƒë¦¬/ì´ˆìŒíŒŒ/ì„í…Œ/ëª¸ìƒíƒœ)
        â”‚
        â””â”€> ì„¤ì •íƒ­: ì•± ì„¤ì •
              â”œâ”€> ì•Œë¦¼ ON/OFF
              â”œâ”€> ì¬ì•Œë¦¼ ê°„ê²©
              â””â”€> ì•± ì •ë³´/ì•½ê´€
```

### 2.3 ì „ì²´ í™”ë©´ ëª©ë¡

**ë©”ì¸ í™”ë©´**
| íŒŒì¼ | ì„¤ëª… |
|---|---|
| main_screen.dart | ë°”í…€ ë„¤ë¹„ê²Œì´ì…˜ ì»¨í…Œì´ë„ˆ |
| home_screen.dart | í™ˆ (ì˜¤ëŠ˜ ì•½ë¬¼) |
| calendar_screen.dart | ìº˜ë¦°ë” |
| simple_record_screen.dart | ê¸°ë¡/íƒ€ì„ë¼ì¸ |
| settings_screen.dart | ì„¤ì • |

**ì•½ë¬¼ ê´€ë ¨**
| íŒŒì¼ | ì„¤ëª… |
|---|---|
| quick_add_medication_screen.dart | ì•½ë¬¼ ë¹ ë¥¸ ì¶”ê°€ (ê¶Œì¥) |
| voice_input_screen.dart | ìŒì„± ì…ë ¥ |
| add_medication_screen.dart | ì•½ë¬¼ ì¶”ê°€ (ìƒì„¸) |
| medication_search_screen.dart | ì•½ë¬¼ ê²€ìƒ‰ |
| medication_detail_screen.dart | ì•½ë¬¼ ìƒì„¸ ì •ë³´ |

**ì•ŒëŒ**
| íŒŒì¼ | ì„¤ëª… |
|---|---|
| fullscreen_alarm_screen.dart | í’€ìŠ¤í¬ë¦° ì•ŒëŒ (ë©”ì¸) |
| alarm_screen.dart | ì•ŒëŒ í™”ë©´ (ë³´ì¡°) |

**ì •ë³´**
| íŒŒì¼ | ì„¤ëª… |
|---|---|
| treatment_record_screen.dart | ì‹œìˆ  ê¸°ë¡ |
| hospital_search_screen.dart | ë³‘ì› ê²€ìƒ‰ |
| hospital_info_screen.dart | ë³‘ì› ì •ë³´ |
| app_info_screen.dart | ì•± ì •ë³´ |
| privacy_policy_screen.dart | ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨ |
| terms_of_service_screen.dart | ì´ìš©ì•½ê´€ |
| disclaimer_screen.dart | ë©´ì±…ì‚¬í•­ |

---

## 3. ë°ì´í„° ëª¨ë¸ ìƒì„¸

### 3.1 ì•½ë¬¼ ëª¨ë¸ (Medication)

```dart
class Medication {
  String id;           // UUID v4 ê³ ìœ  ID
  String name;         // ì•½ë¬¼ëª… (í•„ìˆ˜)
  String? dosage;      // ìš©ëŸ‰ (ì˜ˆ: "75IU", "2ì •")
  String time;         // íˆ¬ì•½ ì‹œê°„ "HH:mm" í˜•ì‹
  DateTime startDate;  // ì‹œì‘ì¼
  DateTime endDate;    // ì¢…ë£Œì¼
  MedicationType type; // ì•½ë¬¼ ì¢…ë¥˜
  String? pattern;     // ë³µìš© íŒ¨í„´
  int totalCount;      // ì´ ë³µìš© íšŸìˆ˜
}

enum MedicationType {
  injection,   // ğŸ’‰ ì£¼ì‚¬ - í”¼í•˜ì£¼ì‚¬, ê·¼ìœ¡ì£¼ì‚¬
  oral,        // ğŸ’Š ê²½êµ¬ì•½/ì•Œì•½
  suppository, // âšª ì§ˆì • - ì§ˆ ì‚½ì… ì•½ë¬¼
  patch,       // ğŸµ í•œì•½/ê¸°íƒ€
}
```

**MedicationType ìƒì„¸**:
| íƒ€ì… | ì•„ì´ì½˜ | ì„¤ëª… | ì™„ë£Œ ë²„íŠ¼ í…ìŠ¤íŠ¸ |
|---|---|---|---|
| injection | ğŸ’‰ | ì£¼ì‚¬ | "ë§ì•˜ì–´ìš”" |
| oral | ğŸ’Š | ì•Œì•½ | "ë¨¹ì—ˆì–´ìš”" |
| suppository | âšª | ì§ˆì • | "ë„£ì—ˆì–´ìš”" |
| patch | ğŸµ | í•œì•½ | "ë¨¹ì—ˆì–´ìš”" |

**ë³µìš© íŒ¨í„´ ì˜µì…˜**:
- `ë§¤ì¼` - ë§¤ì¼ ë³µìš©
- `ê²©ì¼` - í•˜ë£¨ ê±¸ëŸ¬ ë³µìš©
- `ì›”ìˆ˜ê¸ˆ` - ì›”/ìˆ˜/ê¸ˆë§Œ
- `í™”ëª©í† ` - í™”/ëª©/í† ë§Œ

### 3.2 ì•½ë¬¼ ë¡œê·¸ ëª¨ë¸ (MedicationLog)

```dart
class MedicationLog {
  String id;
  String medicationId;        // ì•½ë¬¼ ID (FK)
  String medicationName;      // ì•½ë¬¼ëª… (ì—­ì •ê·œí™”)
  MedicationType medicationType;
  DateTime scheduledTime;     // ì˜ˆì • ì‹œê°„
  DateTime? completedTime;    // ì‹¤ì œ ì™„ë£Œ ì‹œê°„
  MedicationStatus status;    // ìƒíƒœ
  String? injectionSide;      // ì£¼ì‚¬ ë¶€ìœ„ (left/right)
  String? dosage;
  int snoozeCount;            // ìŠ¤ëˆ„ì¦ˆ íšŸìˆ˜
}

enum MedicationStatus {
  pending,    // â³ ëŒ€ê¸° ì¤‘
  completed,  // âœ… ë³µìš© ì™„ë£Œ
  skipped,    // â­ï¸ ê±´ë„ˆëœ€
  snoozed,    // ğŸ” ë‹¤ì‹œ ì•Œë¦¼
}
```

### 3.3 ì¹˜ë£Œ ì‚¬ì´í´ ëª¨ë¸ (TreatmentCycle)

```dart
class TreatmentCycle {
  String id;
  TreatmentType type;           // ivf ë˜ëŠ” iui
  int cycleNumber;              // Nì°¨ ì‹œë„ (1, 2, 3...)
  bool isNaturalCycle;          // ìì—°ì£¼ê¸° ì—¬ë¶€ (IUIë§Œ)
  bool isFrozenTransfer;        // ë™ê²°ë°°ì•„ ì´ì‹ (IVFë§Œ)
  DateTime startDate;           // ì‹œì‘ì¼
  DateTime? endDate;            // ì¢…ë£Œì¼
  List<TreatmentEvent> events;  // íƒ€ì„ë¼ì¸ ì´ë²¤íŠ¸
  CycleResult? result;          // ì‚¬ì´í´ ê²°ê³¼
}

enum TreatmentType {
  ivf,  // ğŸ¥š ì‹œí—˜ê´€ (In Vitro Fertilization)
  iui,  // ğŸ’« ì¸ê³µìˆ˜ì • (Intrauterine Insemination)
}
```

### 3.4 ì‹œìˆ  ì´ë²¤íŠ¸ ëª¨ë¸ (TreatmentEvent)

```dart
class TreatmentEvent {
  String id;
  EventType type;               // ì´ë²¤íŠ¸ ì¢…ë¥˜
  DateTime date;                // ì´ë²¤íŠ¸ ë‚ ì§œ
  int? count;                   // ê°œìˆ˜ (ì±„ì·¨/ì´ì‹/ë™ê²°)
  int? embryoDays;              // ë°°ì–‘ì¼ìˆ˜ (ì´ì‹/ë™ê²°)
  int? matureCount;             // ì„±ìˆ™ë‚œì ê°œìˆ˜ (ì±„ì·¨)
  int? fertilizedCount;         // ìˆ˜ì • ë°°ì•„ ê°œìˆ˜ (ì±„ì·¨)
  List<EmbryoInfo>? embryos;    // ë‹¤ì¤‘ ë°°ì•„ ì •ë³´
  String? memo;                 // ë©”ëª¨
  DateTime createdAt;           // ìƒì„± ì‹œê°„
}

enum EventType {
  stimulation,  // ğŸ’‰ ê³¼ë°°ë€ - ë‚œí¬ìê·¹ì œ íˆ¬ì—¬ ì‹œì‘
  retrieval,    // ğŸ¥š ì±„ì·¨ - ë‚œì ì±„ì·¨
  transfer,     // ğŸŒ± ì´ì‹ - ë°°ì•„ ì´ì‹
  freezing,     // â„ï¸ ë™ê²° - ë°°ì•„ ë™ê²° ë³´ê´€
  insemination, // ğŸ’« ì¸ê³µìˆ˜ì • - ì •ì ì£¼ì…
}
```

**EventType ìƒì„¸**:
| íƒ€ì… | ì•„ì´ì½˜ | ì„¤ëª… | ì…ë ¥ í•„ë“œ |
|---|---|---|---|
| stimulation | ğŸ’‰ | ê³¼ë°°ë€ ì£¼ì‚¬ ì‹œì‘ | ë‚ ì§œ, ë©”ëª¨ |
| retrieval | ğŸ¥š | ë‚œì ì±„ì·¨ | ë‚ ì§œ, ì±„ì·¨ ê°œìˆ˜, ì„±ìˆ™ë‚œì, ìˆ˜ì • ë°°ì•„, ë©”ëª¨ |
| transfer | ğŸŒ± | ë°°ì•„ ì´ì‹ | ë‚ ì§œ, ë°°ì•„ ì •ë³´ (ë°°ì–‘ì¼ìˆ˜+ê°œìˆ˜), ë©”ëª¨ |
| freezing | â„ï¸ | ë°°ì•„ ë™ê²° | ë‚ ì§œ, ë°°ì•„ ì •ë³´ (ë°°ì–‘ì¼ìˆ˜+ê°œìˆ˜), ë©”ëª¨ |
| insemination | ğŸ’« | ì¸ê³µìˆ˜ì • | ë‚ ì§œ, ë©”ëª¨ |

### 3.5 ë°°ì•„ ì •ë³´ ëª¨ë¸ (EmbryoInfo)

```dart
class EmbryoInfo {
  int days;   // ë°°ì–‘ì¼ìˆ˜ (2~6ì¼, ë³´í†µ 3ì¼ ë˜ëŠ” 5ì¼)
  int count;  // ê°œìˆ˜
}
```

### 3.6 ì‚¬ì´í´ ê²°ê³¼

```dart
enum CycleResult {
  success,   // ğŸ‰ ì¢‹ì€ ì†Œì‹ - ì„ì‹  ì„±ê³µ
  frozen,    // â„ï¸ ë™ê²° ëŒ€ê¸° - ë°°ì•„ ë™ê²° í›„ ë‹¤ìŒ ì´ì‹ ëŒ€ê¸°
  rest,      // ğŸ’œ ì‰¬ì–´ê°€ê¸° - íœ´ì‹ê¸°
  nextTime,  // ğŸ’œ ë‹¤ìŒ ì¤€ë¹„ - ë‹¤ìŒ ì‹œë„ ì¤€ë¹„
}
```

### 3.7 ì¶”ê°€ ê¸°ë¡ ëª¨ë¸

#### ìƒë¦¬ ê¸°ë¡ (PeriodRecord)
```dart
class PeriodRecord {
  String id;
  String? cycleId;      // ì—°ê²°ëœ ì‚¬ì´í´ ID
  DateTime date;        // ìƒë¦¬ ì‹œì‘ì¼
  String? memo;
  DateTime createdAt;
}
```

#### ì´ˆìŒíŒŒ ê²€ì‚¬ (UltrasoundRecord)
```dart
class UltrasoundRecord {
  String id;
  String? cycleId;
  DateTime date;
  List<double>? follicleSizes;     // ë‚œí¬ í¬ê¸°ë“¤ (mm)
  double? endometriumThickness;    // ìê¶ë‚´ë§‰ ë‘ê»˜ (mm)
  String? memo;
  DateTime createdAt;
}
```

#### ì„ì‹  í…ŒìŠ¤íŠ¸ (PregnancyTestRecord)
```dart
class PregnancyTestRecord {
  String id;
  String? cycleId;
  DateTime date;
  PregnancyTestResult result;      // ê²°ê³¼
  PregnancyTestType? testType;     // ê²€ì‚¬ ìœ í˜•
  String? memo;
  DateTime createdAt;
}

enum PregnancyTestResult {
  positive,  // ğŸ‰ ì–‘ì„±
  faint,     // ğŸ¤” í¬ë¯¸í•œ ì„ 
  negative,  // ğŸ’œ ìŒì„±
}

enum PregnancyTestType {
  home,      // ğŸ  ê°€ì •ìš© ì„í…Œê¸°
  hospital,  // ğŸ¥ ë³‘ì› ê²€ì‚¬ (Î²-hCG)
}
```

#### ëª¸ ìƒíƒœ (ConditionRecord)
```dart
class ConditionRecord {
  String id;
  String? cycleId;
  DateTime date;
  List<SymptomType> symptoms;  // ì¦ìƒ ëª©ë¡
  String? memo;
  DateTime createdAt;
}

enum SymptomType {
  bloating,     // ğŸ«ƒ ë³µë¶€ íŒ½ë§Œê°
  headache,     // ğŸ¤• ë‘í†µ
  nausea,       // ğŸ¤¢ ë©”ìŠ¤êº¼ì›€
  breastPain,   // ğŸ©¹ ê°€ìŠ´ í†µì¦
  fatigue,      // ğŸ˜´ í”¼ë¡œ
  moodSwing,    // ğŸ˜¢ ê¸°ë¶„ ë³€í™”
  insomnia,     // ğŸ˜µ ë¶ˆë©´
  other,        // ğŸ“ ê¸°íƒ€
}
```

#### í˜ˆì•¡ ê²€ì‚¬ (BloodTest)
```dart
class BloodTest {
  String id;
  String cycleId;
  DateTime date;
  double? e2;    // ì—ìŠ¤íŠ¸ë¼ë””ì˜¬ (pg/mL)
  double? fsh;   // ë‚œí¬ìê·¹í˜¸ë¥´ëª¬ (mIU/mL)
  double? lh;    // í™©ì²´í˜•ì„±í˜¸ë¥´ëª¬ (mIU/mL)
  double? p4;    // í”„ë¡œê²ŒìŠ¤í…Œë¡  (ng/mL)
  double? hcg;   // Î²-hCG (mIU/mL) - ì„ì‹  í™•ì¸
  double? amh;   // ë‚œì†Œ ì˜ˆë¹„ë ¥ (ng/mL)
  double? tsh;   // ê°‘ìƒì„  (mIU/L)
  double? vitD;  // ë¹„íƒ€ë¯¼D (ng/mL)
  DateTime createdAt;
}
```

**í˜ˆì•¡ ê²€ì‚¬ í•­ëª© ì„¤ëª…**:
| í•­ëª© | ì•½ì–´ | ì •ìƒ ë²”ìœ„ | ì˜ë¯¸ |
|---|---|---|---|
| ì—ìŠ¤íŠ¸ë¼ë””ì˜¬ | E2 | ë‚œí¬ê¸° 30-120 | ë‚œí¬ ì„±ìˆ™ë„ |
| ë‚œí¬ìê·¹í˜¸ë¥´ëª¬ | FSH | 3-10 | ë‚œì†Œ ê¸°ëŠ¥ |
| í™©ì²´í˜•ì„±í˜¸ë¥´ëª¬ | LH | 1-12 | ë°°ë€ ìœ ë°œ |
| í”„ë¡œê²ŒìŠ¤í…Œë¡  | P4 | í™©ì²´ê¸° >10 | ì°©ìƒ í™˜ê²½ |
| Î²-hCG | hCG | ì„ì‹  ì‹œ >25 | ì„ì‹  í™•ì¸ |
| ë‚œì†Œ ì˜ˆë¹„ë ¥ | AMH | 1.0-3.5 | ë‚œì†Œ ë‚˜ì´ |
| ê°‘ìƒì„  | TSH | 0.5-4.0 | ê°‘ìƒì„  ê¸°ëŠ¥ |
| ë¹„íƒ€ë¯¼D | Vit D | 30-100 | ì°©ìƒ ê´€ë ¨ |

### 3.8 ë³‘ì› ëª¨ë¸ (Hospital)

```dart
class Hospital {
  String? ykiho;        // ìš”ì–‘ê¸°ê´€ ë²ˆí˜¸ (ê³ ìœ  ID)
  String name;          // ë³‘ì›ëª…
  String address;       // ì£¼ì†Œ
  String? phone;        // ì „í™”ë²ˆí˜¸
  String? sidoName;     // ì‹œë„ëª…
  String? sgguName;     // ì‹œêµ°êµ¬ëª…
  double? latitude;     // ìœ„ë„
  double? longitude;    // ê²½ë„
  String? clCdNm;       // ì¢…ë³„ëª… (ì¢…í•©ë³‘ì›, ë³‘ì› ë“±)
}
```

### 3.9 ì•Œë¦¼ ì„¤ì • ëª¨ë¸ (NotificationSettings)

```dart
class NotificationSettings {
  bool isEnabled;                    // ì•Œë¦¼ í™œì„±í™” ì—¬ë¶€
  int repeatIntervalMinutes;         // ì¬ì•Œë¦¼ ê°„ê²© (ê¸°ë³¸ 5ë¶„)

  // ìƒìˆ˜
  static const int autoSnoozeTimeoutSeconds = 60;  // ìë™ ìŠ¤ëˆ„ì¦ˆ (1ë¶„)
  static const int maxSnoozeCount = 3;             // ìµœëŒ€ ìŠ¤ëˆ„ì¦ˆ íšŸìˆ˜
}
```

---

## 4. ì„œë¹„ìŠ¤ ìƒì„¸

### 4.1 MedicationStorageService (ì•½ë¬¼ ì €ì¥ ì„œë¹„ìŠ¤)

| ë©”ì„œë“œ | ë°˜í™˜ íƒ€ì… | ì„¤ëª… |
|---|---|---|
| `getAllMedications()` | `List<Medication>` | ì „ì²´ ì•½ë¬¼ ëª©ë¡ |
| `getMedicationById(String id)` | `Medication?` | IDë¡œ ì•½ë¬¼ ì¡°íšŒ |
| `getMedicationsByDate(DateTime)` | `List<Medication>` | íŠ¹ì • ë‚ ì§œ ì•½ë¬¼ |
| `getTodayMedications()` | `List<Medication>` | ì˜¤ëŠ˜ ì•½ë¬¼ ëª©ë¡ |
| `saveMedication(Medication)` | `void` | ì•½ë¬¼ ì €ì¥ |
| `updateMedication(Medication)` | `void` | ì•½ë¬¼ ìˆ˜ì • |
| `deleteMedication(String id)` | `void` | ì•½ë¬¼ ì‚­ì œ |
| `markMedicationCompleted(...)` | `void` | ë³µìš© ì™„ë£Œ ì²˜ë¦¬ |
| `getCompletedCount(String id, DateTime)` | `int` | ì™„ë£Œ íšŸìˆ˜ ì¡°íšŒ |
| `removeDuplicateMedications()` | `void` | ì¤‘ë³µ ì œê±° |

**ì´ë²¤íŠ¸ ìŠ¤íŠ¸ë¦¼**:
```dart
static final StreamController<String> _completedController;
static Stream<String> get onMedicationCompleted => _completedController.stream;
```

### 4.2 SimpleTreatmentService (ì‹œìˆ  ì‚¬ì´í´ ì„œë¹„ìŠ¤)

| ë©”ì„œë“œ | ë°˜í™˜ íƒ€ì… | ì„¤ëª… |
|---|---|---|
| `getCurrentCycle()` | `TreatmentCycle?` | í˜„ì¬ ì‚¬ì´í´ ì¡°íšŒ |
| `saveCurrentCycle(TreatmentCycle)` | `void` | ì‚¬ì´í´ ì €ì¥ |
| `addEvent(TreatmentEvent)` | `TreatmentCycle` | ì´ë²¤íŠ¸ ì¶”ê°€ |
| `updateEvent(TreatmentEvent)` | `TreatmentCycle` | ì´ë²¤íŠ¸ ìˆ˜ì • |
| `removeEvent(String eventId)` | `TreatmentCycle` | ì´ë²¤íŠ¸ ì‚­ì œ |
| `setCycleResult(CycleResult)` | `TreatmentCycle` | ê²°ê³¼ ì„¤ì • |
| `endCurrentCycle()` | `void` | ì‚¬ì´í´ ì¢…ë£Œ |
| `getPastCycles()` | `List<TreatmentCycle>` | ê³¼ê±° ì‚¬ì´í´ |
| `getNextCycleNumber(TreatmentType)` | `int` | ë‹¤ìŒ ì‚¬ì´í´ ë²ˆí˜¸ |

### 4.3 AdditionalRecordService (ì¶”ê°€ ê¸°ë¡ ì„œë¹„ìŠ¤)

**ìƒë¦¬ ê¸°ë¡**:
| ë©”ì„œë“œ | ë°˜í™˜ íƒ€ì… |
|---|---|
| `getAllPeriodRecords()` | `List<PeriodRecord>` |
| `getPeriodRecordsByCycle(String)` | `List<PeriodRecord>` |
| `getPeriodRecordsByDateRange(DateTime, DateTime)` | `List<PeriodRecord>` |
| `addPeriodRecord(PeriodRecord)` | `void` |
| `updatePeriodRecord(PeriodRecord)` | `void` |
| `deletePeriodRecord(String id)` | `void` |

**ì´ˆìŒíŒŒ/ì„í…Œ/ëª¸ìƒíƒœ**: ë™ì¼í•œ CRUD íŒ¨í„´

### 4.4 InjectionSiteService (ì£¼ì‚¬ ë¶€ìœ„ ì„œë¹„ìŠ¤)

| ë©”ì„œë“œ | ë°˜í™˜ íƒ€ì… | ì„¤ëª… |
|---|---|---|
| `getLastSite()` | `String?` | ë§ˆì§€ë§‰ ì£¼ì‚¬ ë¶€ìœ„ |
| `getRecommendedSite()` | `String` | ì¶”ì²œ ë¶€ìœ„ (ë°˜ëŒ€ìª½) |
| `saveSite(String side)` | `void` | ë¶€ìœ„ ì €ì¥ |
| `getHistory()` | `List<Map>` | ì£¼ì‚¬ ê¸°ë¡ |
| `clearHistory()` | `void` | ê¸°ë¡ ì´ˆê¸°í™” |

**ì£¼ì‚¬ ë¶€ìœ„ ë¡œì§**:
- ë§ˆì§€ë§‰ì´ `left` â†’ ì¶”ì²œ `right`
- ë§ˆì§€ë§‰ì´ `right` â†’ ì¶”ì²œ `left`
- ê¸°ë¡ ì—†ìŒ â†’ ê¸°ë³¸ `left`

### 4.5 HomeWidgetService (í™ˆ ìœ„ì ¯ ì„œë¹„ìŠ¤)

| ë©”ì„œë“œ | ì„¤ëª… |
|---|---|
| `initialize()` | ìœ„ì ¯ ì´ˆê¸°í™” |
| `updateWidget()` | ìœ„ì ¯ ë°ì´í„° ì—…ë°ì´íŠ¸ |
| `onMedicationCompleted(String)` | ë³µìš© ì™„ë£Œ ì‹œ ì—…ë°ì´íŠ¸ |

**ìœ„ì ¯ í‘œì‹œ ë°ì´í„°**:
- ì˜¤ëŠ˜ ì•½ë¬¼ ëª©ë¡
- ë³µìš© ìƒíƒœ (ì™„ë£Œ/ë¯¸ì™„ë£Œ)
- ë‹¤ìŒ ë³µìš© ì‹œê°„

### 4.6 BackupService (ë°±ì—… ì„œë¹„ìŠ¤)

| ë©”ì„œë“œ | ì„¤ëª… |
|---|---|
| `createBackup()` | JSON ë°±ì—… íŒŒì¼ ìƒì„± |
| `restoreBackup(File)` | ë°±ì—…ì—ì„œ ë³µì› |
| `exportBackupAsJson()` | JSON ë¬¸ìì—´ ë‚´ë³´ë‚´ê¸° |

**ë°±ì—… ëŒ€ìƒ**:
- ì•½ë¬¼ ì •ë³´ ë° ë³µìš© ë¡œê·¸
- ì¹˜ë£Œ ì‚¬ì´í´ (í˜„ì¬ + ê³¼ê±°)
- ì¶”ê°€ ê¸°ë¡ (ìƒë¦¬, ì´ˆìŒíŒŒ, ì„í…Œ, ëª¸ìƒíƒœ, í˜ˆì•¡ê²€ì‚¬)
- ì•Œë¦¼ ì„¤ì •
- ë³‘ì› ì •ë³´

### 4.7 GeminiParserService (AI íŒŒì‹± ì„œë¹„ìŠ¤)

| ë©”ì„œë“œ | ë°˜í™˜ íƒ€ì… | ì„¤ëª… |
|---|---|---|
| `initialize()` | `bool` | Gemini ëª¨ë¸ ì´ˆê¸°í™” |
| `parseVoiceText(String)` | `VoiceRecognitionResult` | í…ìŠ¤íŠ¸ íŒŒì‹± |

**íŒŒì‹± ì˜ˆì‹œ**:
```
ì…ë ¥: "í”„ë¡œê¸°ë…¸ë°” ì•„ì¹¨ ì €ë… í•˜ë‚˜ì”© ì¼ì£¼ì¼"
ì¶œë ¥: {
  name: "í”„ë¡œê¸°ë…¸ë°”",
  type: MedicationType.oral,
  times: ["08:00", "18:00"],
  dosage: "1ì •",
  durationDays: 7
}
```

---

## 5. ì•Œë¦¼ ì‹œìŠ¤í…œ ìƒì„¸

### 5.1 ì•Œë¦¼ ê°œìš”

| í•­ëª© | ì„¤ì • |
|---|---|
| ì†Œë¦¬ | ì—†ìŒ (ë¬´ì¡°ê±´) |
| ì§„ë™ | í•­ìƒ í™œì„±í™”, ê³„ì† ë°˜ë³µ |
| ë°©ì‹ | í’€ìŠ¤í¬ë¦° ì•ŒëŒ + í‘¸ì‹œ ì•Œë¦¼ |
| ìë™ ìŠ¤ëˆ„ì¦ˆ | 1ë¶„ ë°©ì¹˜ ì‹œ |
| ìµœëŒ€ ìŠ¤ëˆ„ì¦ˆ | 3íšŒ |

### 5.2 ì•Œë¦¼ ì¢…ë¥˜

| ì¢…ë¥˜ | íŠ¸ë¦¬ê±° | ë²„íŠ¼ | ë™ì‘ |
|---|---|---|---|
| ì •ê° ì•Œë¦¼ | ì•½ë¬¼ íˆ¬ì•½ ì‹œê°„ | ë§ì•˜ì–´ìš”/ë‚˜ì¤‘ì— | í’€ìŠ¤í¬ë¦° + í‘¸ì‹œ |
| ìŠ¤ëˆ„ì¦ˆ ì•Œë¦¼ | Në¶„ í›„ ì¬ì•Œë¦¼ | ë§ì•˜ì–´ìš”/ë‚˜ì¤‘ì— | í’€ìŠ¤í¬ë¦° + í‘¸ì‹œ |
| ìë™ ìŠ¤ëˆ„ì¦ˆ | 1ë¶„ ë°©ì¹˜ | - | ìë™ ì¬ì•Œë¦¼ ì˜ˆì•½ |

### 5.3 ë²„íŠ¼ ë™ì‘

**"ë§ì•˜ì–´ìš”" / "ë¨¹ì—ˆì–´ìš”"**:
1. ì•ŒëŒ ì¤‘ì§€
2. ë³µìš© ì™„ë£Œ ê¸°ë¡ ì €ì¥
3. ìŠ¤ëˆ„ì¦ˆ ì•Œë¦¼ ì „ì²´ ì·¨ì†Œ
4. ì™„ë£Œ ì˜¤ë²„ë ˆì´ í‘œì‹œ (ì£¼ì‚¬ ì‹œ ì‘ì› ë©”ì‹œì§€)
5. í™ˆ ìœ„ì ¯ ì—…ë°ì´íŠ¸

**"ë‚˜ì¤‘ì—"**:
1. ì•ŒëŒ ì¤‘ì§€
2. ìŠ¤ëˆ„ì¦ˆ ì˜ˆì•½ (ì„¤ì •ëœ ê°„ê²©)
3. ìµœëŒ€ 3íšŒê¹Œì§€ë§Œ ê°€ëŠ¥
4. 3íšŒ ì´ˆê³¼ ì‹œ ë²„íŠ¼ ë¹„í™œì„±í™”

### 5.4 ì•Œë¦¼ ID ì²´ê³„

```
ê¸°ë³¸ ID: medicationId.hashCode % 100000
ìŠ¤ëˆ„ì¦ˆ ID: ê¸°ë³¸ID + 10000 + (ìŠ¤ëˆ„ì¦ˆíšŸìˆ˜ * 1000)

ì˜ˆì‹œ:
- ì •ê° ì•Œë¦¼: 12345
- 1ì°¨ ìŠ¤ëˆ„ì¦ˆ: 12345 + 10000 + 1000 = 23345
- 2ì°¨ ìŠ¤ëˆ„ì¦ˆ: 12345 + 10000 + 2000 = 24345
- 3ì°¨ ìŠ¤ëˆ„ì¦ˆ: 12345 + 10000 + 3000 = 25345
```

### 5.5 ì•Œë¦¼ í”Œë¡œìš°

```
ì•½ë¬¼ íˆ¬ì•½ ì‹œê°„ ë„ë˜
  â””â”€> AlarmService ì•ŒëŒ ë°œë™
        â”œâ”€> í‘¸ì‹œ ì•Œë¦¼ í‘œì‹œ (ì•Œë¦¼ ì„¼í„°)
        â””â”€> FullscreenAlarmScreen í‘œì‹œ (ì „ì²´í™”ë©´)
              â”‚
              â”œâ”€> ì£¼ì‚¬ì¸ ê²½ìš°
              â”‚     â””â”€> ì£¼ì‚¬ ë¶€ìœ„ ì„ íƒ UI í‘œì‹œ
              â”‚
              â”œâ”€> "ë§ì•˜ì–´ìš”" íƒ­
              â”‚     â”œâ”€> ë³µìš© ì™„ë£Œ ì²˜ë¦¬
              â”‚     â”œâ”€> ì£¼ì‚¬ ë¶€ìœ„ ì €ì¥ (ì£¼ì‚¬ë§Œ)
              â”‚     â”œâ”€> ì™„ë£Œ ì˜¤ë²„ë ˆì´ í‘œì‹œ
              â”‚     â””â”€> í™”ë©´ ë‹«í˜
              â”‚
              â”œâ”€> "ë‚˜ì¤‘ì—" íƒ­
              â”‚     â”œâ”€> ìŠ¤ëˆ„ì¦ˆ ì˜ˆì•½ (ì„¤ì •ëœ ê°„ê²©)
              â”‚     â””â”€> í™”ë©´ ë‹«í˜
              â”‚
              â””â”€> 1ë¶„ ë°©ì¹˜ (íƒ€ì´ë¨¸)
                    â”œâ”€> ìë™ ìŠ¤ëˆ„ì¦ˆ ì²˜ë¦¬
                    â””â”€> í™”ë©´ ë‹«í˜
```

### 5.6 AlarmSettings êµ¬ì„±

```dart
AlarmSettings(
  id: alarmId,
  dateTime: scheduledTime,
  assetAudioPath: 'assets/alarm_sound.mp3',
  loopAudio: true,     // ì§„ë™ ë°˜ë³µ
  vibrate: true,       // ì§„ë™ í™œì„±í™”
  volume: 0,           // ì†Œë¦¬ ì—†ìŒ
  fadeDuration: 0,
  warningNotificationOnKill: false,
  androidFullScreenIntent: true,  // í’€ìŠ¤í¬ë¦° ì¸í…íŠ¸
  notificationSettings: NotificationSettings(
    title: 'ğŸ’‰ ì•½ë¬¼ëª… ì£¼ì‚¬ ì‹œê°„',
    body: 'ìš©ëŸ‰ ë§ìœ¼ì„¸ìš”',
    stopButton: 'ì¤‘ì§€',
    icon: 'ic_launcher',
  ),
)
```

---

## 6. ì„¤ì • ì˜µì…˜ ìƒì„¸

### 6.1 ì‚¬ìš©ì ë³€ê²½ ê°€ëŠ¥ ì„¤ì •

| ì„¤ì • | ì˜µì…˜ | ê¸°ë³¸ê°’ | ì„¤ëª… |
|---|---|---|---|
| ì•Œë¦¼ ON/OFF | ì¼œê¸°/ë„ê¸° | ì¼œê¸° | ì „ì²´ ì•Œë¦¼ í™œì„±í™” |
| ì¬ì•Œë¦¼ ê°„ê²© | 3/5/10/15ë¶„ | 5ë¶„ | ìŠ¤ëˆ„ì¦ˆ ê°„ê²© |

### 6.2 ì„¤ì • í™”ë©´ êµ¬ì„±

```
ì„¤ì •
â”œâ”€ ì•Œë¦¼ ì„¤ì •
â”‚   â”œâ”€ ì•Œë¦¼ í™œì„±í™” [í† ê¸€]
â”‚   â””â”€ ì¬ì•Œë¦¼ ê°„ê²© [ì„ íƒ]
â”‚
â”œâ”€ ì•± ì •ë³´
â”‚   â”œâ”€ ë²„ì „ ì •ë³´
â”‚   â””â”€ ë¹Œë“œ ë²ˆí˜¸
â”‚
â”œâ”€ ì•½ê´€/ì •ì±…
â”‚   â”œâ”€ ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨
â”‚   â”œâ”€ ì´ìš©ì•½ê´€
â”‚   â””â”€ ë©´ì±…ì‚¬í•­
â”‚
â”œâ”€ í”¼ë“œë°±
â”‚   â”œâ”€ í”¼ë“œë°± ì „ì†¡ (ì´ë©”ì¼)
â”‚   â””â”€ ì•± í‰ê°€í•˜ê¸° (ìŠ¤í† ì–´)
â”‚
â””â”€ ë°ì´í„° ê´€ë¦¬
    â”œâ”€ ë°±ì—…
    â””â”€ ë³µì›
```

---

## 7. ê¶Œí•œ ìƒì„¸

### 7.1 Android ê¶Œí•œ

**ì•Œë¦¼ ê´€ë ¨**:
| ê¶Œí•œ | ìš©ë„ | í•„ìˆ˜ |
|---|---|---|
| POST_NOTIFICATIONS | í‘¸ì‹œ ì•Œë¦¼ (Android 13+) | O |
| SCHEDULE_EXACT_ALARM | ì •í™•í•œ ì•ŒëŒ | O |
| USE_EXACT_ALARM | ì •í™•í•œ ì•ŒëŒ | O |
| USE_FULL_SCREEN_INTENT | í’€ìŠ¤í¬ë¦° ì•ŒëŒ | O |
| RECEIVE_BOOT_COMPLETED | ë¶€íŒ… í›„ ì•Œë¦¼ ë³µì› | O |

**ì‹œìŠ¤í…œ ì œì–´**:
| ê¶Œí•œ | ìš©ë„ | í•„ìˆ˜ |
|---|---|---|
| SYSTEM_ALERT_WINDOW | ë‹¤ë¥¸ ì•± ìœ„ì— í‘œì‹œ | O |
| VIBRATE | ì§„ë™ | O |
| WAKE_LOCK | ë°±ê·¸ë¼ìš´ë“œ ìœ ì§€ | O |
| TURN_SCREEN_ON | í™”ë©´ ì¼œê¸° | O |
| DISABLE_KEYGUARD | ì ê¸ˆí™”ë©´ í•´ì œ | O |
| FOREGROUND_SERVICE | í¬ê·¸ë¼ìš´ë“œ ì„œë¹„ìŠ¤ | O |
| REQUEST_IGNORE_BATTERY_OPTIMIZATIONS | ë°°í„°ë¦¬ ìµœì í™” ì˜ˆì™¸ | â–³ |

**ê¸°ëŠ¥ ê´€ë ¨**:
| ê¶Œí•œ | ìš©ë„ | í•„ìˆ˜ |
|---|---|---|
| RECORD_AUDIO | ìŒì„± ì¸ì‹ | â–³ |
| INTERNET | ì¸í„°ë„· | O |

### 7.2 iOS ê¶Œí•œ

| ê¶Œí•œ | ìš©ë„ |
|---|---|
| NSMicrophoneUsageDescription | ìŒì„± ì…ë ¥ |
| NSCameraUsageDescription | ì²˜ë°©ì „ ì´¬ì˜ |
| NSPhotoLibraryUsageDescription | ì‚¬ì§„ ì„ íƒ |
| NSSpeechRecognitionUsageDescription | ìŒì„± ì¸ì‹ |

### 7.3 iOS ë°±ê·¸ë¼ìš´ë“œ ëª¨ë“œ

```xml
<key>UIBackgroundModes</key>
<array>
  <string>audio</string>
  <string>fetch</string>
  <string>processing</string>
  <string>remote-notification</string>
</array>
```

---

## 8. ë°ì´í„° ì €ì¥ ìƒì„¸

### 8.1 ì €ì¥ ë°©ì‹

**SharedPreferences** (ë¡œì»¬ ì €ì¥)
- ëª¨ë“  ë°ì´í„° ê¸°ê¸° ë‚´ ì €ì¥
- JSON ì§ë ¬í™”
- í´ë¼ìš°ë“œ ë™ê¸°í™” ì—†ìŒ

### 8.2 ì €ì¥ í‚¤ ì „ì²´ ëª©ë¡

**ì•½ë¬¼ ê´€ë ¨**:
| í‚¤ | í˜•ì‹ | ì„¤ëª… |
|---|---|---|
| `medications_{YYYY-MM-DD}` | JSON Array | ë‚ ì§œë³„ ì•½ë¬¼ ëª©ë¡ |
| `medication_logs_{YYYY-MM-DD}` | JSON Array | ë‚ ì§œë³„ ë³µìš© ë¡œê·¸ |

**ì‹œìˆ  ì‚¬ì´í´**:
| í‚¤ | í˜•ì‹ | ì„¤ëª… |
|---|---|---|
| `timeline_current_cycle` | JSON Object | í˜„ì¬ ì‚¬ì´í´ |
| `timeline_past_cycles` | JSON Array | ê³¼ê±° ì‚¬ì´í´ |

**ì¶”ê°€ ê¸°ë¡**:
| í‚¤ | í˜•ì‹ | ì„¤ëª… |
|---|---|---|
| `period_records` | JSON Array | ìƒë¦¬ ê¸°ë¡ |
| `ultrasound_records` | JSON Array | ì´ˆìŒíŒŒ ê¸°ë¡ |
| `pregnancy_test_records` | JSON Array | ì„í…Œ ê¸°ë¡ |
| `condition_records` | JSON Array | ëª¸ìƒíƒœ ê¸°ë¡ |
| `blood_tests` | JSON Array | í˜ˆì•¡ê²€ì‚¬ ê¸°ë¡ |

**ì£¼ì‚¬ ë¶€ìœ„**:
| í‚¤ | í˜•ì‹ | ì„¤ëª… |
|---|---|---|
| `injection_sites` | JSON Array | ì£¼ì‚¬ ê¸°ë¡ |
| `last_injection_site` | String | ë§ˆì§€ë§‰ ë¶€ìœ„ |
| `injection_history` | JSON Array | ë¶€ìœ„ íˆìŠ¤í† ë¦¬ |

**ì•Œë¦¼**:
| í‚¤ | í˜•ì‹ | ì„¤ëª… |
|---|---|---|
| `alarm_data_{alarmId}` | JSON Object | ì•ŒëŒ ë©”íƒ€ë°ì´í„° |
| `notification_settings` | JSON Object | ì•Œë¦¼ ì„¤ì • |

**ê¸°íƒ€**:
| í‚¤ | í˜•ì‹ | ì„¤ëª… |
|---|---|---|
| `user_hospital_info` | JSON Object | ë³‘ì› ì •ë³´ |
| `onboarding_completed` | bool | ì˜¨ë³´ë”© ì™„ë£Œ |

---

## 9. ì‚¬ìš© íŒ¨í‚¤ì§€ ì „ì²´ ëª©ë¡

### 9.1 í•µì‹¬ íŒ¨í‚¤ì§€

| íŒ¨í‚¤ì§€ | ë²„ì „ | ìš©ë„ |
|---|---|---|
| flutter_riverpod | ^2.6.1 | ìƒíƒœ ê´€ë¦¬ |
| flutter_local_notifications | ^18.0.1 | í‘¸ì‹œ ì•Œë¦¼ |
| alarm | ^4.1.0 | í’€ìŠ¤í¬ë¦° ì•ŒëŒ |
| speech_to_text | ^7.0.0 | ìŒì„± ì¸ì‹ |
| google_generative_ai | ^0.4.7 | Gemini AI |
| shared_preferences | ^2.3.3 | ë¡œì»¬ ì €ì¥ |
| timezone | ^0.10.0 | ì•Œë¦¼ ìŠ¤ì¼€ì¤„ë§ |

### 9.2 UI/UX íŒ¨í‚¤ì§€

| íŒ¨í‚¤ì§€ | ë²„ì „ | ìš©ë„ |
|---|---|---|
| cupertino_icons | ^1.0.8 | iOS ìŠ¤íƒ€ì¼ ì•„ì´ì½˜ |
| url_launcher | ^6.3.1 | ë§í¬ ì—´ê¸° |
| file_picker | ^8.1.6 | íŒŒì¼ ì„ íƒ |
| share_plus | ^10.1.4 | íŒŒì¼ ê³µìœ  |
| in_app_review | ^2.0.10 | ì•± í‰ê°€ ìœ ë„ |
| flutter_show_when_locked | ^1.0.0 | ì ê¸ˆí™”ë©´ í‘œì‹œ |

### 9.3 ìœ í‹¸ë¦¬í‹° íŒ¨í‚¤ì§€

| íŒ¨í‚¤ì§€ | ë²„ì „ | ìš©ë„ |
|---|---|---|
| http | ^1.2.0 | HTTP ìš”ì²­ |
| xml | ^6.5.0 | XML íŒŒì‹± |
| image_picker | ^1.1.2 | ì‚¬ì§„ ì„ íƒ |
| google_mlkit_text_recognition | ^0.14.0 | OCR |
| permission_handler | ^11.3.1 | ê¶Œí•œ ê´€ë¦¬ |
| intl | ^0.20.2 | ë‚ ì§œ í¬ë§·íŒ… |
| path_provider | ^2.1.5 | íŒŒì¼ ê²½ë¡œ |
| package_info_plus | ^8.1.3 | íŒ¨í‚¤ì§€ ì •ë³´ |
| device_info_plus | ^11.2.0 | ë””ë°”ì´ìŠ¤ ì •ë³´ |
| connectivity_plus | ^6.1.1 | ë„¤íŠ¸ì›Œí¬ ìƒíƒœ |
| home_widget | ^0.8.1 | í™ˆ ìœ„ì ¯ |

### 9.4 ê°œë°œ ë„êµ¬

| íŒ¨í‚¤ì§€ | ë²„ì „ | ìš©ë„ |
|---|---|---|
| flutter_launcher_icons | ^0.14.3 | ì•± ì•„ì´ì½˜ ìƒì„± |

---

## 10. ì„œë¹„ìŠ¤ êµ¬ì¡°

### 10.1 ì„œë¹„ìŠ¤ ëª©ë¡

| ì„œë¹„ìŠ¤ | íŒŒì¼ | ì—­í•  |
|---|---|---|
| MedicationStorageService | medication_storage_service.dart | ì•½ë¬¼ CRUD |
| SimpleTreatmentService | simple_treatment_service.dart | ì‹œìˆ  ì‚¬ì´í´ ê´€ë¦¬ |
| AdditionalRecordService | additional_record_service.dart | ì¶”ê°€ ê¸°ë¡ ê´€ë¦¬ |
| NotificationService | notification_service.dart | í‘¸ì‹œ ì•Œë¦¼ |
| AlarmService | alarm_service.dart | ì•ŒëŒ ì˜ˆì•½ |
| NotificationSchedulerService | notification_scheduler_service.dart | ì•Œë¦¼ ìŠ¤ì¼€ì¤„ë§ |
| NotificationSettingsService | notification_settings_service.dart | ì•Œë¦¼ ì„¤ì • |
| GeminiParserService | gemini_parser_service.dart | AI íŒŒì‹± |
| InjectionSiteService | injection_site_service.dart | ì£¼ì‚¬ ë¶€ìœ„ ê´€ë¦¬ |
| HomeWidgetService | home_widget_service.dart | í™ˆ ìœ„ì ¯ |
| HospitalService | hospital_service.dart | ë³‘ì› ê²€ìƒ‰ |
| OnboardingService | onboarding_service.dart | ì˜¨ë³´ë”© |
| BackupService | backup_service.dart | ë°±ì—…/ë³µì› |

### 10.2 ì„œë¹„ìŠ¤ ì˜ì¡´ì„±

```
NotificationSchedulerService
  â”œâ”€> NotificationService (ì•Œë¦¼ ë°œì†¡)
  â”œâ”€> AlarmService (ì•ŒëŒ ì˜ˆì•½)
  â”œâ”€> MedicationStorageService (ì•½ë¬¼ ì¡°íšŒ)
  â””â”€> NotificationSettingsService (ì„¤ì • ì¡°íšŒ)

MedicationStorageService
  â””â”€> NotificationSchedulerService (ì•Œë¦¼ ì¬ìŠ¤ì¼€ì¤„)

FullscreenAlarmScreen
  â”œâ”€> NotificationService (ìŠ¤ëˆ„ì¦ˆ ì˜ˆì•½)
  â”œâ”€> MedicationStorageService (ë³µìš© ì™„ë£Œ)
  â”œâ”€> InjectionSiteService (ë¶€ìœ„ ì €ì¥)
  â””â”€> HomeWidgetService (ìœ„ì ¯ ì—…ë°ì´íŠ¸)
```

---

## 11. ì™¸ë¶€ API

### 11.1 Gemini AI (Google Generative AI)

| í•­ëª© | ê°’ |
|---|---|
| **ìš©ë„** | ìŒì„± í…ìŠ¤íŠ¸ íŒŒì‹± â†’ ì•½ë¬¼ ì •ë³´ ì¶”ì¶œ |
| **íŒ¨í‚¤ì§€** | google_generative_ai 0.4.7 |
| **ëª¨ë¸** | gemini-2.5-flash-lite |
| **API í‚¤** | `AIzaSyB877xe3wZhqrTHWwiFpwmrF-iUHBoFzpQ` |
| **í‹°ì–´** | ë¬´ë£Œ (10íšŒ/ë¶„) |
| **íŒŒì¼** | `lib/services/gemini_parser_service.dart` |

**ì‚¬ìš© ìœ„ì¹˜**:
- ìŒì„± ì…ë ¥ í™”ë©´ì—ì„œ ìì—°ì–´ â†’ ì•½ë¬¼ ì •ë³´ íŒŒì‹±
- ì˜ˆ: "í”„ë¡œê¸°ë…¸ë°” ì•„ì¹¨ ì €ë… ì¼ì£¼ì¼" â†’ JSON êµ¬ì¡°í™”

**ì„¤ì •**:
```dart
GenerativeModel(
  model: 'gemini-2.5-flash-lite',
  apiKey: _geminiApiKey,
  generationConfig: GenerationConfig(
    temperature: 0.1,  // ë‚®ì€ ì˜¨ë„ë¡œ ì¼ê´€ëœ ê²°ê³¼
    maxOutputTokens: 1024,
  ),
)
```

---

### 11.2 ê³µê³µë°ì´í„° ë³‘ì› ì •ë³´ API

| í•­ëª© | ê°’ |
|---|---|
| **ìš©ë„** | ì‚°ë¶€ì¸ê³¼/ë‚œì„ ë³‘ì› ê²€ìƒ‰ |
| **ë°ì´í„° ì¶œì²˜** | ê³µê³µë°ì´í„°í¬í„¸ (data.go.kr) |
| **APIëª…** | ê±´ê°•ë³´í—˜ì‹¬ì‚¬í‰ê°€ì›_ì „êµ­ ë³‘ì˜ì› ë° ì•½êµ­ í˜„í™© |
| **Base URL** | `http://apis.data.go.kr/B551182/hospInfoServicev2` |
| **Service Key** | `9452f9e3e312293e084b9a4b34ca590f2acf7f4342eae5fafc2b02920d470a15` |
| **íŒŒì¼** | `lib/services/hospital_service.dart` |

**ì—”ë“œí¬ì¸íŠ¸**:
- `/getHospBasisList` - ë³‘ì› ê¸°ë³¸ ì •ë³´ ì¡°íšŒ

**ìš”ì²­ íŒŒë¼ë¯¸í„°**:
| íŒŒë¼ë¯¸í„° | ê°’ | ì„¤ëª… |
|---|---|---|
| serviceKey | API í‚¤ | ì¸ì¦ |
| dgsbjtCd | 11 | ì‚°ë¶€ì¸ê³¼ ì½”ë“œ |
| yadmNm | ê²€ìƒ‰ì–´ | ë³‘ì›ëª… |
| sidoCd | ì½”ë“œ | ì‹œë„ ì½”ë“œ |
| pageNo | ìˆ«ì | í˜ì´ì§€ ë²ˆí˜¸ |
| numOfRows | ìˆ«ì | ê²°ê³¼ ìˆ˜ |
| _type | json | ì‘ë‹µ í˜•ì‹ |

**ì‘ë‹µ í˜•ì‹**: JSON

---

### 11.3 API í‚¤ ê´€ë¦¬ í˜„í™©

| API | í‚¤ ì €ì¥ ìœ„ì¹˜ | ë¹„ê³  |
|---|---|---|
| Gemini AI | ì½”ë“œ í•˜ë“œì½”ë”© | ë¬´ë£Œ í‹°ì–´, ê³µê°œ ê°€ëŠ¥ |
| ê³µê³µë°ì´í„° API | ì½”ë“œ í•˜ë“œì½”ë”© | ê³µê³µ API, ê³µê°œ ê°€ëŠ¥ |

> **ì°¸ê³ **: í˜„ì¬ ëª¨ë“  API í‚¤ê°€ ì½”ë“œì— í•˜ë“œì½”ë”©ë˜ì–´ ìˆìŒ. í”„ë¡œë•ì…˜ ë°°í¬ ì‹œ í™˜ê²½ë³€ìˆ˜ ë˜ëŠ” ë³´ì•ˆ ì €ì¥ì†Œë¡œ ì´ì „ ê¶Œì¥.

---

## 12. ìœ„ì ¯ ìƒì„¸

### 12.1 ê¸°ë³¸ ìœ„ì ¯

| ìœ„ì ¯ | íŒŒì¼ | ì„¤ëª… |
|---|---|---|
| AppCard | app_card.dart | ì•± ì „ì²´ ì¹´ë“œ ìŠ¤íƒ€ì¼ |
| AppButton | app_button.dart | ì•± ì „ì²´ ë²„íŠ¼ ìŠ¤íƒ€ì¼ |
| StartGuideCard | start_guide_card.dart | ì‹œì‘ ê°€ì´ë“œ ì¹´ë“œ |
| CompletionOverlay | completion_overlay.dart | ë³µìš© ì™„ë£Œ ì˜¤ë²„ë ˆì´ |

### 12.2 ë°”í…€ì‹œíŠ¸

| ìœ„ì ¯ | íŒŒì¼ | ìš©ë„ |
|---|---|---|
| NewCycleBottomSheet | new_cycle_bottom_sheet.dart | ìƒˆ ì‚¬ì´í´ ì‹œì‘ |
| CycleEditBottomSheet | cycle_edit_bottom_sheet.dart | ì‚¬ì´í´ í¸ì§‘ |
| CycleResultBottomSheet | cycle_result_bottom_sheet.dart | ì‚¬ì´í´ ê²°ê³¼ ì…ë ¥ |
| EventEditBottomSheet | event_edit_bottom_sheet.dart | ì´ë²¤íŠ¸ í¸ì§‘ |
| EventTypeBottomSheet | event_type_bottom_sheet.dart | ì´ë²¤íŠ¸ íƒ€ì… ì„ íƒ |
| PeriodBottomSheet | period_bottom_sheet.dart | ìƒë¦¬ ê¸°ë¡ |
| UltrasoundBottomSheet | ultrasound_bottom_sheet.dart | ì´ˆìŒíŒŒ ê²€ì‚¬ |
| BloodTestBottomSheet | blood_test_bottom_sheet.dart | í˜ˆì•¡ê²€ì‚¬ |
| PregnancyTestBottomSheet | pregnancy_test_bottom_sheet.dart | ì„ì‹  í…ŒìŠ¤íŠ¸ |
| ConditionBottomSheet | condition_bottom_sheet.dart | ëª¸ ìƒíƒœ |
| InjectionSiteBottomSheet | injection_site_bottom_sheet.dart | ì£¼ì‚¬ ë¶€ìœ„ |
| ConfirmBottomSheet | confirm_bottom_sheet.dart | í™•ì¸ ë‹¤ì´ì–¼ë¡œê·¸ |

### 12.3 íŠ¹ìˆ˜ ìœ„ì ¯

| ìœ„ì ¯ | íŒŒì¼ | ì„¤ëª… |
|---|---|---|
| TimelineWidgets | timeline_widgets.dart | íƒ€ì„ë¼ì¸ UI |
| InjectionLocationDialog | injection_location_dialog.dart | ì£¼ì‚¬ ìœ„ì¹˜ ì„ íƒ |
| RatingRequestSheet | rating_request_sheet.dart | í‰ê°€ ìš”ì²­ |
| FeedbackSheet | feedback_sheet.dart | í”¼ë“œë°± ì…ë ¥ |

---

## 13. ìƒìˆ˜ ìƒì„¸

### 13.1 ìƒ‰ìƒ (AppColors)

**ì£¼ìš” ìƒ‰ìƒ**:
| ìƒ‰ìƒ | ê°’ | ìš©ë„ |
|---|---|---|
| primaryPurple | #B19CD9 | ì£¼ìš” ìƒ‰ìƒ |
| primaryPurpleLight | #E8D5F0 | ë°ì€ ë³´ë¼ |
| primaryPurpleDark | #8B7BB5 | ì§„í•œ ë³´ë¼ |

**ë°°ê²½/í…ìŠ¤íŠ¸**:
| ìƒ‰ìƒ | ê°’ | ìš©ë„ |
|---|---|---|
| background | #FAFAFA | ì•± ë°°ê²½ |
| cardBackground | #FFFFFF | ì¹´ë“œ ë°°ê²½ |
| textPrimary | #1A1A1A | ì£¼ìš” í…ìŠ¤íŠ¸ |
| textSecondary | #666666 | ë³´ì¡° í…ìŠ¤íŠ¸ |
| textDisabled | #AAAAAA | ë¹„í™œì„± í…ìŠ¤íŠ¸ |

**ìƒíƒœ ìƒ‰ìƒ**:
| ìƒ‰ìƒ | ê°’ | ìš©ë„ |
|---|---|---|
| success | #4CAF50 | ì„±ê³µ |
| error | #F44336 | ì˜¤ë¥˜ |
| warning | #FFC107 | ê²½ê³  |

### 13.2 í°íŠ¸ ìŠ¤íƒ€ì¼ (AppTextStyles)

| ìŠ¤íƒ€ì¼ | í¬ê¸° | êµµê¸° | ìš©ë„ |
|---|---|---|---|
| h1 | 28 | Bold | ëŒ€ì œëª© |
| h2 | 24 | SemiBold | ì œëª© |
| h3 | 20 | SemiBold | ì†Œì œëª© |
| body | 16 | Normal | ë³¸ë¬¸ |
| caption | 14 | Normal | ìº¡ì…˜ |
| small | 12 | Normal | ì‘ì€ í…ìŠ¤íŠ¸ |

### 13.3 ì‘ì› ë©”ì‹œì§€ (EncouragementMessages)

**ì£¼ì‚¬ ë©”ì‹œì§€** (20ê°œ):
- "ì˜¤ëŠ˜ë„ ìš©ê°í•˜ê²Œ ì˜ ë§ìœ¼ì…¨ì–´ìš”!"
- "ì£¼ì‚¬ í•œ ë°©, í¬ë§ ê°€ë“!"
- "ì•„í”„ì§€ë§Œ ì°¸ ì˜í•˜ì…¨ì–´ìš” ğŸ’‰"
- ...

**ì•½ë¬¼ ë©”ì‹œì§€** (20ê°œ):
- "ì˜¤ëŠ˜ë„ ì˜ ì±™ê²¨ ë“œì…¨ë„¤ìš”!"
- "ê¾¸ì¤€í•¨ì´ ìµœê³ ì˜ ì•½ì´ì—ìš” ğŸ’Š"
- ...

**ì‹œê°„ëŒ€ë³„ ë©”ì‹œì§€**:
- ì•„ì¹¨ (5-11ì‹œ): "ì¢‹ì€ ì•„ì¹¨ì´ì—ìš”!"
- ë‚® (11-17ì‹œ): "ì˜¤í›„ë„ í™”ì´íŒ…!"
- ì €ë… (17-21ì‹œ): "í•˜ë£¨ ë§ˆë¬´ë¦¬ ì˜í•˜ì„¸ìš”!"
- ë°¤ (21-5ì‹œ): "í‘¹ ì‰¬ì„¸ìš”!"

---

## 14. ë³´ì•ˆ ë° í”„ë¼ì´ë²„ì‹œ

- **ë°ì´í„° ì €ì¥**: ì „ë¶€ ê¸°ê¸° ë‚´ ë¡œì»¬ ì €ì¥
- **í´ë¼ìš°ë“œ ë™ê¸°í™”**: ì—†ìŒ
- **API í†µì‹ **: Gemini AI, ê³µê³µë°ì´í„° API (HTTPS)
- **ë¯¼ê° ì •ë³´**: ì˜ë£Œ ì •ë³´ëŠ” ê¸°ê¸° ë‚´ì—ë§Œ ì¡´ì¬
- **ê¶Œí•œ ìš”ì²­**: í•„ìš”í•œ ì‹œì ì—ë§Œ ìš”ì²­
- **API í‚¤**: ë¬´ë£Œ/ê³µê³µ APIë§Œ ì‚¬ìš©, ë¯¼ê° ì •ë³´ ë¯¸í¬í•¨

---

## 15. ë¹Œë“œ ì •ë³´

| í•­ëª© | ê°’ |
|---|---|
| ì•± ID | com.ivfmate.app |
| ë²„ì „ | 1.0.0+1 |
| Flutter SDK | ^3.10.4 |
| ìµœì†Œ Android SDK | 24 (Android 7.0) |
| íƒ€ê²Ÿ Android SDK | 34 (Android 14) |
| ìµœì†Œ iOS | 12.0 |

---

## 16. íŒŒì¼ êµ¬ì¡°

```
lib/
â”œâ”€â”€ main.dart                          # ì•± ì§„ì…ì 
â”œâ”€â”€ models/                            # ë°ì´í„° ëª¨ë¸
â”‚   â”œâ”€â”€ medication.dart                # ì•½ë¬¼, MedicationType
â”‚   â”œâ”€â”€ medication_log.dart            # ë³µìš© ë¡œê·¸, MedicationStatus
â”‚   â”œâ”€â”€ medication_info.dart           # ì˜ì•½í’ˆ ìƒì„¸ ì •ë³´
â”‚   â”œâ”€â”€ simple_treatment_cycle.dart    # ì¹˜ë£Œ ì‚¬ì´í´, ì´ë²¤íŠ¸
â”‚   â”œâ”€â”€ additional_records.dart        # ì¶”ê°€ ê¸°ë¡ (ìƒë¦¬, ì´ˆìŒíŒŒ ë“±)
â”‚   â”œâ”€â”€ hospital.dart                  # ë³‘ì› ì •ë³´
â”‚   â”œâ”€â”€ notification_settings.dart     # ì•Œë¦¼ ì„¤ì •
â”‚   â”œâ”€â”€ voice_recognition_result.dart  # ìŒì„± ì¸ì‹ ê²°ê³¼
â”‚   â””â”€â”€ onboarding_checklist.dart      # ì˜¨ë³´ë”© ì²´í¬ë¦¬ìŠ¤íŠ¸
â”‚
â”œâ”€â”€ services/                          # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”œâ”€â”€ medication_storage_service.dart
â”‚   â”œâ”€â”€ simple_treatment_service.dart
â”‚   â”œâ”€â”€ additional_record_service.dart
â”‚   â”œâ”€â”€ notification_service.dart
â”‚   â”œâ”€â”€ notification_scheduler_service.dart
â”‚   â”œâ”€â”€ notification_settings_service.dart
â”‚   â”œâ”€â”€ alarm_service.dart
â”‚   â”œâ”€â”€ injection_site_service.dart
â”‚   â”œâ”€â”€ home_widget_service.dart
â”‚   â”œâ”€â”€ backup_service.dart
â”‚   â”œâ”€â”€ onboarding_service.dart
â”‚   â”œâ”€â”€ hospital_service.dart
â”‚   â””â”€â”€ gemini_parser_service.dart
â”‚
â”œâ”€â”€ screens/                           # UI í™”ë©´
â”‚   â”œâ”€â”€ main_screen.dart
â”‚   â”œâ”€â”€ home_screen.dart
â”‚   â”œâ”€â”€ calendar_screen.dart
â”‚   â”œâ”€â”€ simple_record_screen.dart
â”‚   â”œâ”€â”€ settings_screen.dart
â”‚   â”œâ”€â”€ quick_add_medication_screen.dart
â”‚   â”œâ”€â”€ voice_input_screen.dart
â”‚   â”œâ”€â”€ fullscreen_alarm_screen.dart
â”‚   â”œâ”€â”€ alarm_screen.dart
â”‚   â””â”€â”€ privacy_policy_screen.dart
â”‚
â”œâ”€â”€ widgets/                           # ì¬ì‚¬ìš© ìœ„ì ¯
â”‚   â”œâ”€â”€ app_card.dart
â”‚   â”œâ”€â”€ app_button.dart
â”‚   â”œâ”€â”€ completion_overlay.dart
â”‚   â”œâ”€â”€ timeline_widgets.dart
â”‚   â”œâ”€â”€ new_cycle_bottom_sheet.dart
â”‚   â”œâ”€â”€ event_edit_bottom_sheet.dart
â”‚   â”œâ”€â”€ period_bottom_sheet.dart
â”‚   â”œâ”€â”€ ultrasound_bottom_sheet.dart
â”‚   â”œâ”€â”€ blood_test_bottom_sheet.dart
â”‚   â”œâ”€â”€ pregnancy_test_bottom_sheet.dart
â”‚   â”œâ”€â”€ condition_bottom_sheet.dart
â”‚   â”œâ”€â”€ injection_site_bottom_sheet.dart
â”‚   â””â”€â”€ injection_location_dialog.dart
â”‚
â”œâ”€â”€ constants/                         # ìƒìˆ˜
â”‚   â”œâ”€â”€ app_colors.dart
â”‚   â”œâ”€â”€ app_text_styles.dart
â”‚   â”œâ”€â”€ app_spacing.dart
â”‚   â””â”€â”€ encouragement_messages.dart
â”‚
â””â”€â”€ assets/                            # ë¦¬ì†ŒìŠ¤
    â””â”€â”€ alarm_sound.mp3
```

---

*ë¬¸ì„œ ìƒì„±ì¼: 2026-01-23*
*ìµœì¢… ìˆ˜ì •ì¼: 2026-01-23*
*ê¸°ë‹¤ë¦¼ë©”ì´íŠ¸ ì•± v1.0.0*
